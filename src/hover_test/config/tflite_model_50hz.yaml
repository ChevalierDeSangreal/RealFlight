# TFLite Neural Network Model Configuration for Hover Test (50Hz Control)
# This configuration file specifies the neural network model and control parameters for 50Hz control frequency

/**:
  ros__parameters:
    # Neural network control
    use_neural_control: true
    
    # Model path (relative to package share directory or absolute path)
    # You may need to adjust this path based on your installation
    # Note: This should be a model trained for 50Hz control (dt=0.02s)
    model_path: "/home/radxa/RealFlight/src/hover_test/config/hoverVer2_policy.tflite"
    # model_path: "/home/radxa/RealFlight/src/hover_test/config/hoverVer1_policy_stable.tflite"
    # model_path: "/home/radxa/RealFlight/src/hover_test/config/hoverVer0_policy.tflite"
    
    # Control timing (50Hz version)
    action_update_period: 0.02  # 50 Hz neural network inference (dt=0.02s)
    control_send_period: 0.01    # 100 Hz control loop for command transmission
    hover_duration: 10.0  # Duration to run hover control [seconds]
    
    # Fallback hover parameters (used if neural control fails)
    hover_thrust: 0.22  # Normalized thrust for hovering [0.0-1.0]
    # hover_thrust: 0.581  # Normalized thrust for hovering [0.0-1.0]
    
    # Mode stabilization delay
    mode_stabilization_delay: 0.6  # Wait 0.6s for mode switch stabilization [seconds]

    # Target point position (in NED frame, meters)
    # The neural network will control the drone to hover at this target point
    target_x: 0.0  # Target X position
    target_y: 0.0   # Target Y position
    target_z: -1.21  # Target Z position (NED: negative = above ground)
    
# Notes:
# - The model expects observations at 50 Hz (dt=0.02s) for this configuration
# - Action update happens at 50Hz, control commands are sent at 100Hz
# - Model input: 650D = 50 history steps Ã— (4 action dims + 9 obs dims) per step
#   - Buffer format: [action_t-49, obs_t-49, action_t-48, obs_t-48, ..., action_t, obs_t]
# - Model output: 4D [thrust, omega_x, omega_y, omega_z]
# - All outputs are in range [-1, 1] due to tanh activation
# - Observation space (9D, body frame):
#   - Body velocity (3), Body gravity direction (3), Distance to target point in body frame (3)

